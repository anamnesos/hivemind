# Workflows

- Release process: version bump in `ui/package.json`, `npx electron-builder` (`--win` from Windows, `--mac` from Mac), `gh release create`, bump `RELEASE_VERSION` in `squidrun-site/platform-download-button.tsx`, push to deploy.
- GitHub Releases are immutable in this repo once published. Do not create an empty release and then upload assets. Use one atomic command that creates the release with all files attached (for example: `gh release create vX.Y.Z <all-artifact-paths> --title "vX.Y.Z" --generate-notes`).
- Site deployment: `squidrun-site/` is Next.js on Vercel (project: `squidrun-site`, team: `anamnesos`), domains: `squidrun.com` + `www.squidrun.com`. Push to `master` triggers auto-deploy.
- Cross-device messaging: Architect-to-Architect only, by design. The bridge is NOT for reaching remote Builder/Oracle directly. Each Architect routes to its own local team via `hm-send`. Target format: `@<device>-architect` (e.g. `@macbook-architect`). Enforced by `bridge_architect_only` gate in `squidrun-app.js:1900`. Requires `SQUIDRUN_CROSS_DEVICE=1`, `SQUIDRUN_DEVICE_ID`, `SQUIDRUN_RELAY_URL`, `SQUIDRUN_RELAY_SECRET` in `.env`. Config resolution: `.squidrun/devices.json` takes priority over `.env` â€” stale secrets in `devices.json` will silently break relay auth.
