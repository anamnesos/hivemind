## Architect Handoff — Session 159
Updated: 2026-02-17

### Completed This Session
- Fixed memory/handoff system: context compressor no longer overwrites agent handoff content
- Handoff files (`workspace/handoffs/{paneId}.md`) persist across sessions, read by compressor
- Context compressor now reads app-status.json for session info (no more circular self-reference)
- Token budget increased from 1500 to 3000

### Prior Session (S158)
- P0: Developer mode CWD leak fix (commit 1304596)
- P0: Firmware preflight broken at boot fix (commit 1304596)
- P1: Agent project context injection — agents now know what project they're on (commit f52b85f)
- P1: No-project-selected warning in project mode (commit f52b85f)
- P2: Project change toast notification — tells user to restart agents (commit f52b85f)
- Enter dispatch fix: direct DOM KeyboardEvent, no focus dependency (commit b252d6e)
- External project workflow fully traced and 10 gaps documented

### Pending
- P3: link.json in external projects is written but never read by agents
- P3: hm-send messages lack project context for cross-project coordination
- P3: Evidence Ledger + Team Memory not project-scoped
- P3: State separation incomplete (~10% done, see workspace/specs/state-separation-audit.md)

### Key Decisions
- Handoff files are git-tracked (NOT gitignored) — survive across sessions
- Context compressor reads handoff files but NEVER overwrites them
- app-status.json is the source of truth for session number (not circular snapshot read)

Tests: 156 suites, 3140 tests passing
