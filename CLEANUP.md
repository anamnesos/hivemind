# CLEANUP.md - Codebase Cleanup Candidates

**Generated:** 2026-02-02
**Total Identified Bloat:** ~500MB+

---

## CRITICAL (Immediate Action - 360MB+ savings)

### 1. **workspace/console.log** - 269MB
**Risk:** SAFE - regenerated on each app start
**Action:** Delete immediately
**Command:** `rm workspace/console.log`
**Note:** Already in .gitignore, pure runtime bloat

### 2. **workspace/logs/app.log** - 73MB
**Risk:** SAFE - regenerated on each app start
**Action:** Delete immediately
**Command:** `rm workspace/logs/app.log`
**Note:** Not in .gitignore - should be added

### 3. **ui/daemon.log** - 17MB
**Risk:** SAFE - already in .gitignore
**Action:** Delete immediately
**Command:** `rm ui/daemon.log`

**TOTAL CRITICAL:** ~360MB saved

---

## HIGH (Session Bloat - 120MB+ savings)

### 4. **workspace/backups/** - 120MB (21 timestamped folders)
**Risk:** MEDIUM - contains historical session backups
**Action:** Delete all but last 3 backups
**Details:**
- 21 backup snapshots from 2026-02-01 to 2026-02-02
- Each contains duplicate copies of status-archive.md, errors-archive.md, blockers-archive.md
- 4,510 markdown files in backups folder
- Largest: 6.2MB each (recent backups)

**Recommended:**
```bash
# Keep only last 3 backups
cd workspace/backups
ls -t | tail -n +4 | xargs rm -rf
```

**Alternative:** Keep only last 7 days if backup retention policy exists

**TOTAL HIGH:** ~110-115MB saved (keeping 3 most recent)

---

## MEDIUM (Build Artifacts - 500KB savings)

### 5. **Python Cache Folders** - ~487KB
**Risk:** SAFE - regenerated by Python runtime
**Action:** Delete all
**Locations:**
- `./.mypy_cache`
- `./__pycache__`
- `./workspace/instances/lead/.mypy_cache`
- `./ui/node_modules/@electron/node-gyp/gyp/pylib/gyp/generator/__pycache__`
- `./ui/node_modules/@electron/node-gyp/gyp/pylib/gyp/__pycache__`
- `./ui/node_modules/@electron/node-gyp/gyp/pylib/packaging/__pycache__`

**Command:**
```bash
find . -type d \( -name "__pycache__" -o -name ".mypy_cache" \) -exec rm -rf {} +
```

**Note:** Already in .gitignore, safe to delete

### 6. **Compiled Python Files** - 23 files
**Risk:** SAFE - regenerated by Python
**Action:** Delete all
**Command:** `find . -name "*.pyc" -delete`

**TOTAL MEDIUM:** ~500KB saved

---

## LOW (Archival Cleanup - Context Dependent)

### 7. **docs/archive/python-v1/** - 156KB
**Risk:** LOW - historical Python v1 implementation
**Status:** No references found in active code
**Action:** VERIFY with Architect before deletion
**Search Result:** No files reference "python-v1" in active codebase
**Recommendation:** Move to separate archive repo or delete if v1 is fully deprecated

### 8. **Archive Markdown Files** - Embedded in workspace/build/
**Files:**
- `workspace/build/blockers-archive.md`
- `workspace/build/errors-archive.md`
- `workspace/build/status-archive.md`
- `workspace/shared_context_archive.md`

**Risk:** MEDIUM - historical session context
**Action:** VERIFY retention policy with Architect
**Note:** These contain sessions 1-49 context per CLAUDE.md instructions
**Recommendation:** Keep unless explicitly told archives are no longer needed

**TOTAL LOW:** ~160KB + context value (TBD)

---

## VERIFICATION NEEDED (Requires Architect Approval)

### 9. **IPC Handler Files** - Utility Check
**Status:** All 56 IPC handler files appear to be registered in handler-registry.js
**Unregistered Files Found:**
- `background-processes.js` - Used by ipc-handlers.js (KEEP)
- `handler-registry.js` - Core registry (KEEP)
- `index.js` - Module export (KEEP)
- `ipc-state.js` - Shared state (KEEP)

**Action:** NO CLEANUP NEEDED - all handlers are active

### 10. **workspace/instances/** - 40MB
**Risk:** HIGH - contains agent working directories
**Action:** VERIFY scope with Architect
**Details:**
- Contains per-agent context and working state
- Includes `.mypy_cache` in `instances/lead/`
- Marked in .gitignore as "local context"

**Recommendation:** Clean Python caches but keep agent state unless policy says otherwise

---

## SUMMARY

| Priority | Target | Size | Risk | Action |
|----------|--------|------|------|--------|
| CRITICAL | Log files | 360MB | SAFE | DELETE NOW |
| HIGH | Old backups | 115MB | MEDIUM | Keep last 3 |
| MEDIUM | Python caches | 500KB | SAFE | DELETE NOW |
| LOW | python-v1 archive | 156KB | LOW | Verify with Architect |
| TBD | instances/ | 40MB | HIGH | Verify scope |
| TBD | Archive .md files | ~200KB | MEDIUM | Check retention policy |

**Immediate Safe Actions (No Approval Needed):**
```bash
# Delete logs (360MB)
rm workspace/console.log workspace/logs/app.log ui/daemon.log

# Delete Python caches (500KB)
find . -type d \( -name "__pycache__" -o -name ".mypy_cache" \) -exec rm -rf {} +
find . -name "*.pyc" -delete
```

**Total Immediate Safe Cleanup:** ~360.5MB

**Requires Approval:**
- Backup retention policy (115MB potential)
- python-v1 archive status (156KB)
- Archive markdown retention (200KB)
- instances/ working directory scope (40MB)

---

## .gitignore Additions Needed

Currently missing from .gitignore:
```
workspace/logs/*.log
```

**Recommendation:** Add `workspace/logs/` to .gitignore to prevent future bloat tracking

---

## Notes

1. **workspace/console.log** - This is the PRIMARY bloat source (269MB). Should investigate why it grows so large and consider log rotation.

2. **Backup Strategy** - 21 backups with 4,510 files suggests backup system may need retention policy (e.g., keep last 7 days or 5 most recent).

3. **Python Caches** - Presence of .mypy_cache and __pycache__ in multiple locations suggests Python code is being executed. These are safe to delete but will regenerate on next Python run.

4. **IPC Handlers** - All 56 handler files are registered and active. No dead handlers found.

5. **Archive Policy** - CLAUDE.md references archive files for "sessions 1-49 context" and "historical research only." Clarify if these are still needed for debugging/context or can be moved to cold storage.

---

**Next Steps:**
1. Execute safe cleanups immediately (logs + caches)
2. Get Architect approval for backup retention policy
3. Verify python-v1 archive can be deleted
4. Clarify archive markdown retention requirements
5. Add missing .gitignore entries
